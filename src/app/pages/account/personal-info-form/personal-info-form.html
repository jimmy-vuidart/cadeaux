<div class="personal-info-section">
  <h2 class="text-xl font-bold font-christmas text-gold-400 mb-4 flex items-center gap-2">
    <span class="material-symbols-outlined personal-info-icon">person</span>
    Informations personnelles
  </h2>

  <!-- Success message -->
  @if (successMessage()) {
    <div class="success-message">
      {{ successMessage() }}
    </div>
  }

  <!-- Error message -->
  @if (errorMessage()) {
    <div class="error-message">
      {{ errorMessage() }}
    </div>
  }

  <div class="space-y-4">
    <!-- Display Name Field -->
    <div class="display-name-field">
      <label class="block text-sm font-medium text-white/80 mb-1">Nom d'affichage</label>
      
      @if (isEditing()) {
        <!-- Edit Mode -->
        <div class="flex items-center gap-2">
          <input 
            type="text"
            [(ngModel)]="displayName"
            class="flex-1 px-3 py-2 bg-black/30 border border-white/10 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-gold-400 focus:border-transparent"
            placeholder="Votre nom d'affichage"
            [disabled]="isSaving()"
            (keyup.enter)="saveDisplayName()"
          >
          <app-christmas-button 
            variant="primary" 
            size="sm" 
            (click)="saveDisplayName()"
            [disabled]="isSaving()"
            [busy]="isSaving()"
          >
            Sauvegarder
          </app-christmas-button>
          <app-christmas-button 
            variant="secondary" 
            size="sm" 
            (click)="cancelEdit()"
            [disabled]="isSaving()"
          >
            Annuler
          </app-christmas-button>
        </div>
      } @else {
        <!-- View Mode -->
        <div class="flex items-center gap-2">
          @if (isLoading()) {
            <span class="px-3 py-2 bg-black/30 border border-white/10 rounded-lg text-white flex-1">
              <span class="animate-pulse">Chargement...</span>
            </span>
          } @else {
            <span class="px-3 py-2 bg-black/30 border border-white/10 rounded-lg text-white flex-1 break-all">
              {{ displayName() || 'Non d√©fini' }}
            </span>
          }
          <app-christmas-button 
            variant="secondary" 
            size="sm" 
            (click)="toggleEdit()"
            icon="edit"
            [disabled]="isLoading()"
          >
            Modifier
          </app-christmas-button>
        </div>
      }
    </div>


  </div>
</div>