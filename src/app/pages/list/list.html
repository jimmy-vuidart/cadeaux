<div class="min-h-screen bg-slate-900 px-4 py-8 text-slate-100">
  <div class="mx-auto max-w-3xl">
    <header class="mb-6">
      <h1 class="text-2xl font-bold text-white">{{ title }}</h1>
    </header>

    <section class="rounded-xl border border-slate-700 bg-slate-800/70 p-4 sm:p-6">
      <h2 class="sr-only">Ajouter un cadeau</h2>
      <form class="flex flex-col gap-3 sm:flex-row" (ngSubmit)="addGift()">
        <label for="gift-title" class="sr-only">Titre du cadeau</label>
        <input
          id="gift-title"
          type="text"
          class="min-w-0 flex-1 rounded-full border border-slate-600 bg-slate-900 px-4 py-2 text-slate-100 placeholder-slate-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-400"
          [formControl]="giftTitle"
          placeholder="Ex. Lego, livre, etc."
          [attr.aria-invalid]="giftTitleInvalid() ? 'true' : null"
        />
        <button
          type="submit"
          class="rounded-full bg-blue-500 px-5 py-2 font-semibold text-white hover:bg-blue-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-400 disabled:opacity-60"
          [disabled]="submitting() || giftTitleInvalid()"
        >
          Ajouter
        </button>
      </form>

      @if (addError()) {
        <p class="mt-2 text-sm text-red-300" role="alert">{{ addError() }}</p>
      }
    </section>

    <section class="mt-6">
      <div class="mb-3 flex items-center justify-between gap-3">
        <h2 class="text-lg font-semibold text-white">Cadeaux</h2>
        <button
          type="button"
          class="rounded-full border border-slate-600 px-3 py-1.5 text-sm font-medium text-slate-100 hover:bg-slate-700/60 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-400"
          (click)="toggleFillMode()"
          [attr.aria-pressed]="fillMode() ? 'true' : null"
        >
          {{ fillMode() ? 'Quitter le mode remplissage' : 'Passer en mode remplissage' }}
        </button>
      </div>
      @if (fillMode()) {
        <p class="mb-2 text-sm text-slate-300">Mode remplissage actif : coche un cadeau pour indiquer qu’il est déjà acheté.</p>
      }
      <ul class="divide-y divide-slate-800 rounded-xl border border-slate-800 bg-slate-800/50">
        @for (g of gifts(); track g.id) {
          <li class="flex items-center justify-between gap-3 px-4 py-3">
            <div class="min-w-0">
              <p class="truncate text-slate-100">{{ g.title }}</p>
              @if (fillMode() && g.bought) {
                <p class="text-xs text-green-300">Déjà acheté</p>
              }
            </div>
            @if (fillMode()) {
              <div class="flex items-center gap-2">
                <input
                  type="checkbox"
                  class="size-4 rounded border-slate-600 bg-slate-900 text-blue-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-400"
                  [checked]="!!g.bought"
                  (change)="toggleBought(g)"
                  [disabled]="isUpdating(g.id!)"
                  [attr.aria-label]="'Marquer \'' + g.title + '\' comme acheté'"
                />
              </div>
            }
          </li>
        } @empty {
          <li class="px-4 py-5 text-slate-300">Aucun cadeau pour le moment.</li>
        }
      </ul>
    </section>
  </div>

</div>
