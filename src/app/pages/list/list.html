<div class="px-4 py-8 min-h-screen grid place-items-center">
  <div class="snowflakes" aria-hidden="true">
    <div class="snowflake">❅</div>
    <div class="snowflake">❅</div>
    <div class="snowflake">❆</div>
    <div class="snowflake">❄</div>
    <div class="snowflake">❅</div>
    <div class="snowflake">❆</div>
    <div class="snowflake">❄</div>
    <div class="snowflake">❅</div>
    <div class="snowflake">❆</div>
    <div class="snowflake">❄</div>
  </div>

  <div class="mx-auto w-full max-w-2xl relative z-10 space-y-8 animate-fade-in-up">
    <!-- List Section -->
    <div class="glass-panel p-6 sm:p-10">
      <app-list-header [title]="title" [sharing]="sharing()" (share)="share()" />

      <app-gifts-list [gifts]="gifts()" [fillMode]="fillMode()" [isUpdating]="isUpdatingFn"
        [editingId]="editingGiftId()" [deletingId]="deletingGiftId()" [editTitleControl]="editTitle"
        [editUrlControl]="editUrl" [editSubmitting]="editSubmitting()" [editTitleInvalid]="editTitleInvalid()"
        [editError]="editError()" (toggleFillMode)="toggleFillMode()" (toggleBought)="toggleBought($event)"
        (startEdit)="startEditGift($event)" (cancelEdit)="cancelEdit()" (submitEdit)="submitEdit()"
        (startDelete)="startDeleteGift($event)" (cancelDelete)="cancelDeleteGift()"
        (confirmDelete)="confirmDeleteGift()" (reorderMove)="onReorderMove($event)" />
    </div>

    <!-- Add Gift Section (Separate Card) -->
    <!-- Add Gift Section (Toggle) -->
    @if (showAddForm()) {
    <app-add-gift-form [titleControl]="giftTitle" [urlControl]="giftUrl" [submitting]="submitting()"
      [titleInvalid]="giftTitleInvalid()" [error]="addError()" (addGift)="addGift()" (cancel)="toggleAddForm()" />
    } @else {
    <div class="flex justify-end">
      <app-christmas-button variant="primary" size="sm" icon="add_circle" (click)="toggleAddForm()">
        Ajouter des cadeaux
      </app-christmas-button>
    </div>
    }
  </div>

  <app-share-toast [message]="shareInfo()" [visible]="toastVisible()" />

  <app-confirm-modal [open]="confirmFillOpen()" [title]="'Activer le mode remplissage'"
    [message]="'Activer le mode remplissage va afficher quels cadeaux sont déjà achetés.\n\nSi cette liste est destinée pour toi, tu risques d\'être spoilé(e).\n\nVeux-tu vraiment activer le mode remplissage ?'"
    [confirmLabel]="'Activer'" [cancelLabel]="'Annuler'" (confirm)="confirmEnableFillMode()"
    (cancel)="cancelEnableFillMode()" (close)="cancelEnableFillMode()" />

</div>